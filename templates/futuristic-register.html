<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Access Request - Yarn Management System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modern-style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="auth-body">
    <!-- Animated Background -->
    <div class="auth-background">
        <div class="floating-particles"></div>
        <div class="grid-overlay"></div>
    </div>

    <!-- Main Auth Container -->
    <div class="auth-container">
        <!-- Left Panel - Branding -->
        <div class="auth-left-panel">
            <div class="brand-content">
                <div class="logo-container">
                    <div class="logo-glow">
                        <i class="fas fa-user-plus"></i>
                    </div>
                </div>
                <h1 class="brand-title">Join the Network</h1>
                <p class="brand-subtitle">Request Access to the System</p>
                <div class="brand-features">
                    <div class="feature-item">
                        <i class="fas fa-users"></i>
                        <span>Team Collaboration</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-chart-line"></i>
                        <span>Real-time Analytics</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-mobile-alt"></i>
                        <span>Mobile Ready</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Registration Form -->
        <div class="auth-right-panel">
            <div class="auth-form-container">
                <div class="form-header">
                    <h2>Access Request</h2>
                    <p>Fill out the form to request system access</p>
                </div>

                <!-- Flash Messages -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        <div class="auth-flash-messages">
                            {% for category, message in messages %}
                                <div class="auth-flash-message flash-{{ category }}">
                                    {{ message }}
                                    <button class="close-btn" onclick="this.parentElement.remove()">&times;</button>
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endwith %}

                <form method="POST" class="auth-form" id="registerForm">
                    <div class="form-row">
                        <div class="form-group">
                            <div class="input-container">
                                <div class="input-icon">
                                    <i class="fas fa-user"></i>
                                </div>
                                <input type="text" name="username" placeholder="Username" required class="auth-input" autocomplete="username">
                                <div class="input-glow"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-container">
                                <div class="input-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <input type="email" name="email" placeholder="Email Address" required class="auth-input" autocomplete="email">
                                <div class="input-glow"></div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <div class="input-container">
                                <div class="input-icon">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <input type="password" name="password" placeholder="Password" required class="auth-input" autocomplete="new-password" id="password">
                                <button type="button" class="password-toggle" onclick="togglePassword('password')">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <div class="input-glow"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-container">
                                <div class="input-icon">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <input type="password" name="confirm_password" placeholder="Confirm Password" required class="auth-input" autocomplete="new-password" id="confirmPassword">
                                <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword')">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <div class="input-glow"></div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-container">
                            <div class="input-icon">
                                <i class="fas fa-id-badge"></i>
                            </div>
                            <select name="role" required class="auth-input">
                                <option value="">Select Role</option>
                                <option value="user">User</option>
                                <option value="agent">Agent</option>
                                {% if current_user and current_user.role == 'admin' %}
                                <option value="admin">Admin</option>
                                {% endif %}
                            </select>
                            <div class="input-glow"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-container">
                            <div class="input-icon">
                                <i class="fas fa-building"></i>
                            </div>
                            <input type="text" name="company" placeholder="Company/Organization" class="auth-input">
                            <div class="input-glow"></div>
                        </div>
                    </div>

                    <!-- Password Strength Indicator -->
                    <div class="password-strength" id="passwordStrength" style="display: none;">
                        <div class="strength-label">Password Strength:</div>
                        <div class="strength-bar">
                            <div class="strength-fill" id="strengthFill"></div>
                        </div>
                        <div class="strength-text" id="strengthText">Weak</div>
                    </div>

                    <!-- Password Requirements -->
                    <div class="password-requirements">
                        <div class="requirement-item" id="req-length">
                            <i class="fas fa-times"></i>
                            <span>At least 8 characters</span>
                        </div>
                        <div class="requirement-item" id="req-uppercase">
                            <i class="fas fa-times"></i>
                            <span>One uppercase letter</span>
                        </div>
                        <div class="requirement-item" id="req-lowercase">
                            <i class="fas fa-times"></i>
                            <span>One lowercase letter</span>
                        </div>
                        <div class="requirement-item" id="req-number">
                            <i class="fas fa-times"></i>
                            <span>One number</span>
                        </div>
                        <div class="requirement-item" id="req-special">
                            <i class="fas fa-times"></i>
                            <span>One special character</span>
                        </div>
                    </div>

                    <div class="form-options">
                        <label class="checkbox-container">
                            <input type="checkbox" name="terms" required>
                            <span class="checkmark"></span>
                            <span class="checkbox-text">I agree to the <a href="#" class="auth-link">Terms of Service</a></span>
                        </label>
                    </div>

                    <button type="submit" class="auth-btn">
                        <span class="btn-text">Request Access</span>
                        <div class="btn-loading" style="display: none;">
                            <div class="loading-spinner"></div>
                        </div>
                        <div class="btn-glow"></div>
                    </button>
                </form>

                <div class="auth-footer">
                    <p>Already have access? <a href="{{ url_for('login') }}" class="auth-link">Sign In</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Security Scanner Effect -->
    <div class="security-scanner">
        <div class="scanner-line"></div>
    </div>

    <!-- Floating Elements -->
    <div class="floating-elements">
        <div class="floating-icon" style="top: 20%; left: 10%; animation-delay: 0s;">
            <i class="fas fa-user-plus"></i>
        </div>
        <div class="floating-icon" style="top: 60%; right: 15%; animation-delay: 2s;">
            <i class="fas fa-shield-alt"></i>
        </div>
        <div class="floating-icon" style="bottom: 30%; left: 20%; animation-delay: 4s;">
            <i class="fas fa-key"></i>
        </div>
        <div class="floating-icon" style="top: 40%; right: 30%; animation-delay: 6s;">
            <i class="fas fa-fingerprint"></i>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/futuristic-interactions.js') }}"></script>
    <script src="{{ url_for('static', filename='js/auth-system.js') }}"></script>
</body>
</html>
